-- Header
-- DYNAMIC EXAMPLE
-- require("alpha.term")
-- local dynamic_header = {
--   type = "terminal",
--   command = "chafa -c full --fg-only --symbols braille ~/.config/nvim/static/db.gif",
--   width = 90,
--   height = 20,
--   opts = {
--     position = "center",
--     redraw = true,
--     window_config = {},
--   },
-- }
--[[ local default_header = nil
local ret = "command -v chafa"

if ret == 0
  default_header = dynamic_header
else
  default_header = text_header ]]


local small_header_old = {
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⣿⢹⣿⣿⣿⣿⣿⣿⣿⡟⣿⣿⣿⡿⢻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣟⡛⡛⠊⠈⠘⠯⠦⠿⠿⢿⣎⢷⠸⡿⠟⡱⡿⢿⢛⣽⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠿⣡⣦⡄⣶⣶⣦⣴⣶⠔⠈ ⠛⠈⢑⣮⡵⠿⠟⣻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣸⣿⣽⣿⣿⣿⣧ ⡔⠂⠁  ⢬⠶⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠛⠋⠁ ⠠ ⡈⡄⢠⠁⠙⡚⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢻⡿⡿⠋⢁⣈⣉    ⡀⣀⣠⣄⢿⡦⢲⣦⡈⡩⢽⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣯⡫⠁ ⢈⣹⣿⣛⣀⣠⣄⣀⣀⣀⣉⡙⠺⢝⠉⢐⠁  ⣼⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣶⣶⣿⣿⣿⣿⣿⣿⣿⣿⣿⣯⣅⣁⣘⣀⣶⣤⣾⣠⣶⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
}

local small_header = {
  "⣿⣿⠉⠁    ⡿⣉⠛ ⢨⣿⣿⡏   ⡟⣛⣿⣻⣿⠟⢉⣤⣺⢻⣻⡏ ⡿⠻⢻⣿⢿⠻⡟⢳⢶⣄      ⢠⠿⢭⡛⠁⡆     ⢘⡻⣟⡏   ⢀⡞⣛⡟⠟⠉ ⠟⣿⡿⠁ ⠙⠿⣻⠁       ⠿⣟⣻⠁",
  "⣿⣡⣘     ⡻⡿⠙ ⢸⣿⣿⡅   ⠛⠚⠛⠋⢀⡴⣿⡟⠋⠛⠛⠃ ⣟⣆⣨⠓⠛⠛⠓⠻⣿⡟⡅     ⣾⡖⣿⠂⣸⣧     ⢰⣿⣽⡇  ⣠⣿⣝⣿⠉   ⣀⠸⣼  ⣾⣿⣿        ⠺⣷⣿",
  "⣽⣾⣿     ⣿⣷⣿ ⢸⣿⣿⡇       ⢸⣿⣿⡇     ⣿⣻⣽    ⢰⣟⣻⡇    ⣸⣷⣿⡎⢠⣿⣿⣇    ⢸⣿⣿⡇ ⠰⠿⣿⡟     ⡏⠉⣹  ⣿⣿⣿        ⣷⣿⣿",
  "⣿⣿⣿     ⣿⣿⣿ ⢸⣿⣿⡇       ⢸⣽⣿⡇     ⣿⣿⣿⣶⣶⣶⣾⣿⡿⠋    ⢠⣿⣿⡿  ⢹⣿⣿⡄   ⢸⣿⣿⡇⢰⣶⣦⠈      ⣿⣯⣿  ⣿⣿⣿        ⣿⣿⣿",
  "⣿⣿⣿     ⣿⣿⣿ ⢸⣿⣿⡇       ⢸⣿⣿⡇     ⣿⣿⣿⠛⠛⠛⠻⣿⣿⣷⡄   ⣾⣿⣿⢃⣀⣀ ⢿⣿⣷   ⢸⣿⣿⡇⠸⢿⣿⣷⡄     ⣿⡿⣿  ⠙⢿⣿        ⣿⣿⣿",
  "⢻⣿⣿⣄   ⢠⣿⣿⡟ ⢸⣿⣿⡇       ⢸⣿⣿⡇     ⣿⣿⣿    ⢈⣿⣿⡇  ⣸⣿⣿⣿⣿⣿⣿⡄⠘⣿⣿⣇  ⢸⣿⣿⡇ ⠈⢻⣿⣿⣆    ⣧⣄⣼  ⣷⣄⠙        ⣿⣿⣿",
  " ⠻⣿⣿⣷⣶⣶⣿⣿⡿⠁ ⢸⣿⣿⣷⣶⣶⣶⣶⣶⣶⠂⢸⣿⣿⡇     ⣿⣿⣿    ⢸⣿⣿⡇ ⢠⣿⣿⡿⠁     ⢹⣿⣿⡄ ⢸⣿⣿⡇   ⠻⣿⣿⣷⡀  ⣿⣿⣿  ⣿⣿⣷⣄⠒⢶⣶⣶⣶⡖ ⣿⣿⣿⣶⣶⡶⠒⣢⣴⡖",
  "  ⠈⠛⠿⠿⠿⠟⠋   ⠸⠿⠿⠿⠿⠿⠿⠿⠿⠿ ⠸⠿⠿⠇     ⠿⠿⠿    ⢸⠿⠿⠇ ⠾⠿⠿⠃       ⠿⠿⠷ ⠸⠿⠿⠇    ⠙⠿⠿⠿⢄ ⠿⠿⠿  ⠿⠿⠿⠿⠷⢄⠙⠿⠿⠇ ⠿⠿⠿⠟⢁⠤⠾⠿⠿⠇",
}

local large_header = {
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⠛⠿⢿⣩⡄⣿⣿⠿⢻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇⢻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣏⣄⡻⣿⣿⠸⣿⡇⣶⣿⣿⣿⡟⠛⣫⣿⣿⣿⣿⣿⣿⣿⡿⣿⣿⣿⠈⢿⣿⣿⣿⣿⣿⣿⣿⠟⢁⣸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⢿⡿⡿⣿⡿⣿⡿⣷⠘⠿ ⠉⠁⠿⡻⠟⣫⣴⣀⣿⣿⣿⣿⣿⣿⣿⣿⣧⠹⣿⣿⡇⡘⣿⣿⣿⣿⡿⣻⠇⢠⡆⣿⣿⣿⣿⣿⣿⠿⠛⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣶⣖⣢⣄⡬⢁⣉⠉⠁⠁      ⠉⠉⠛⠛⠛⢻⡿⡿⠿⢿⠿⣿⣿⣆⠘⣿⣿⢡⠹⣿⡟⠫⠾⠁⣠⣿⣹⣿⣿⠿⢛⡩ ⣠⣼⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣷⣷⡶⠅   ⠐⠤⣀⣀⣀     ⠠⢀ ⣐⠉⠙⠛⢂⠌⠟⢋ ⢹⣿⣏ ⣰⠦⠄⠊⣁⠴⡾⢁⣴⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⢿⣯⠖⣡⣾⣶⣠⣤⠠⣼⣿⣿⣿⣿⣾⣾⣤⣶⣾⣿⣿⣷⣴⠊⠁  ⠂⠠⡙⠟⢁⠬  ⠘⢉⣃⣠⣶⣿⣿⣿⣿⣿⡿⠿⢿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⡯⠌⢡⣿⣿⣿⡇⣿⣿⣧⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢟⠁   ⠐⠸ ⡅⡩⠃⠡ ⢀⣾⠿⡿⠿⢛⣛⠍⠉⢀⣀⣤⣴⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣾⣿⣿⣿⣿⠟⢰⣿⣿⣿⣊⢩⣿⣿⣿⣿⣿⣿⣿⣿⣿⣇⢅⡀  ⢠⣕⣐⡮⠾⠂  ⢀ ⢁  ⣚⣩⣤⣶⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⡟⣿⣿⣿⣿⣿⣿⣿⣧⣶⣾⣿⣿⣿⣶⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣗⠂ ⣠⡇⠁⠋  ⠠  ⠈⢰⠈⠐⠛⢛⠿⣿⣿⡿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡷⠾⠛⠓⡄ ⠠⠠⠈  ⢰⠦   ⠙⢿⠌⠎⡇⣿⡟⣿⣿⣿⣿⣿⣿⣿⣽⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠟⠋⠁   ⡐⠆⢄⢬⡄  ⢰⠧⡀ ⠁⣼⡆⠘⡂ ⠈⢻⡼⢳⠿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠿⠋ ⠊   ⢀ ⠰⠔⠊⠊⠡⠔⠢⠴⠆ ⢿⣦ ⠈⢿⡇⡰⠃  ⢣⢋⣼⣿⣿⣿⣿⣿⣯⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠿⠛⠋⠁⠘⠛⠟⠙⠁   ⡀⠄⠂⠈          ⢀⡨⢺⣿⣷⡄⠈⣇⠮⣄⡀  ⠻⣿⠿⠟⠸⠿⣿⣿⣿",
  "⣿⣿⣿⣿⡿⠘⣻⣿⣿⣿⣿⣿⡿⠋    ⢠⣀⣀⣀⡀⠠⠐      ⡀⢀⢤⣄  ⢀⣠⣶⣿⡅⢸⣿⣿⣿⢦⣜⣿⣿⣿⣦⡀ ⢋⡀⡻⠘⠸⠿⠏⣿",
  "⣿⣿⣿⣿⣿⣧⢻⣿⡟⠈⠛⠉  ⣠⣴⣶⣿⣿⣿⣿⣿⡏ ⠄ ⠐⠒ ⠉⠉ ⠚⠓⠾⠷⢿⣿⣿⣿⣿⣷⡈⣿⡿⣫⡌⢋⢨⠿⠛⠟⣟ ⠘⢇ ⡄⡾⠂⡘⣿",
  "⣿⣿⣿⣷⠉⢾⣏⠿⠁  ⣠⢖⣿⠛⢛⣽⣿⣿⣿⣿⠿⠇               ⠰⣄⡽⢻⠿⣿⡗⣀⠸⠜⠈⠠⠚⢷⡀  ⠈⠂⠐⠱⢣⢬⣿",
  "⣿⣿⣿⣿⣿⣮⠛⠄⢄⡀⠑⠋ ⢀⣰⣼⣿⣿⣿⣷⣶⣤⣤⣤⣤⣾⣿⣿⣷⣶⣶⣶⣶⣶⣶⣶⣦⣤⣤⣄⣈⠃ ⠿⠟⠟⠦⠄   ⣄⠄⠂  ⡌ ⠤⣗⣫⣿",
  "⣿⣿⣿⣿⣿⣶⣷⣦⡤⠤⣤⣐⣶⢿⣟⣿⣿⣽⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣯⣿⡿⢛⠿⠛⣝⢥  ⢸⡄⠙⠆⣌   ⠁ ⡸⠂ ⢀⠤⡺⢽⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣛⣛⣛⣣⣭⣷⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣅⣤⡄⣈⡁ ⠤⢄⠁⠰⣀⣾⣿⣿⣷⣶⣞⣺⠭⢿⣶⣿⣾⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣟⣻⣿⣽⣿⣷⣠⣄⣄⣢⣵⣿⣿⣿⣿⣿⣶⣶⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
  "⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿",
}

local dashboard = lvim.builtin.alpha.dashboard

lvim.builtin.alpha.dashboard.section.header = {
  type = "text",
  val = function()
    local alpha_wins = vim.tbl_filter(function(win)
      local buf = vim.api.nvim_win_get_buf(win)
      return vim.api.nvim_buf_get_option(buf, "filetype") == "alpha"
    end, vim.api.nvim_list_wins())

    if vim.api.nvim_win_get_height(alpha_wins[#alpha_wins]) < 54 then
      return small_header
    end
    return large_header
  end,
  opts = {
    position = "center",
    hl = "Error",
  },
}
lvim.builtin.alpha.dashboard.section.footer = {
  type = "text",
  val = {"", "", ""}, -- For some reason, I can't just pass the table as the val
  opts = { position = "center", hl = "String"},
}
lvim.autocommands = {
  {
    'User',
    {
      pattern = 'LazyVimStarted',
      callback = function()
        local stats = require('lazy').stats()
        local ms = (math.floor(stats.startuptime * 100 + 0.5) / 100)
        local platform = function()
          if vim.loop.os_uname().sysname == "Darwin" then
            return " "
          elseif vim.fn.has('linux') then
            return " "
          elseif vim.fn.has('win32') then
            return " "
          else
            return "? "
          end
        end
        local lvim_version = require("lvim.utils.git").get_lvim_version()
        local datetime = os.date " %m-%d-%Y  %H:%M:%S"
        local footer_val = {
          stats.count .. ' plugins loaded in ' .. ms .. "ms",
          string.format("%s on %s", datetime, platform()),
          string.format("%s", lvim_version),
        }
        lvim.builtin.alpha.dashboard.section.footer.val[1] = footer_val[1]
        lvim.builtin.alpha.dashboard.section.footer.val[2] = footer_val[2]
        lvim.builtin.alpha.dashboard.section.footer.val[3] = footer_val[3]
        pcall(vim.cmd.AlphaRedraw)
      end,
    },
  }
}
